<!DOCTYPE html>
<html>
<head> 
	<script src="jquery-1.10.2.js"></script>
	<script src="c3.min.js"></script>
	<script src="d3.v3.min.js"></script>
	<script src="dbint.js"></script>
	<noscript></noscript>
    <meta content="text/html; charset=windows-1252" http-equiv="content-type">
    <title>Briza</title>
    <link rel="stylesheet" type="text/css" href="main.css" media="screen"> 
        <link type="text/css" rel="stylesheet" href="./c3.min.css"
        />
</head>
  <body> <a href="/" style="text-decoration: none">
      <h1 style="background-color: #0062a8;">Sensor Details</h1>
    </a>
    <div class="menu">
      <table>
        <tbody>
          <tr>
            <td class="menuitem"> <a href="/" style="text-decoration: none; color: white;">Wifi</a>
            </td>
            <td class="menuitem"> <a href="upgrade.html" style="text-decoration: none; color:white">Upgrade</a>
            </td>
            <!--<td class="menuitem"> <a href="sensorconf.html" style="text-decoration: none; color: white;">Configure</a>
            </td>-->
            <td class="menuitem" style="background-color: white;"> <a href="sensor.html" style="text-decoration: none; color:#0062a8">Sensors</a> </td>
            <td> 	
		<br>
            </td>
		</tr>
        </tbody>
      </table>
</div>
<div id="readings_section" class="section">
<div class="header">Current Readings</div> 

<div id="gas_section" class="section">
<tr>
<h3>Gaseous Pollutants </h3>
<div id="GAS"></div>
</tr>
<tr>
</div>
<!--
<div id="pm_section" class="section">
<h3>Particulate Matter</h3>
<div id="PM"></div>
</tr>
</div>
-->
<div id="env_section" class="section">
<h3>Meteorological</h3>
<div id="ENV"></div>
</tr>
</div>
</div>
</table>         
<script>

//localStorage.clear();
setInterval(function () {
GASchart.load({
         columns: [
            [localStorage.getItem('COlabel'), ].concat(COArray),
            [localStorage.getItem('NO2label'), ].concat(NO2Array),
            [localStorage.getItem('O3label'), ].concat(O3Array),
            [localStorage.getItem('SO2label'), ].concat(SO2Array),
            [localStorage.getItem('H2Slabel'), ].concat(H2SArray),
            [localStorage.getItem('TORlabel'), ].concat(TORArray),
            [localStorage.getItem('TOXlabel'), ].concat(TOXArray),
            [localStorage.getItem('TOX2label'), ].concat(TOX2Array),
	    	['Time', ].concat(timeArray),
            //[localStorage.getItem('COlabel'), ].concat(JSON.parse(localStorage.getItem('CO'))),
            //[localStorage.getItem('NO2label'), ].concat(JSON.parse(localStorage.getItem('NO2'))),
            //[localStorage.getItem('O3label'), ].concat(JSON.parse(localStorage.getItem('O3'))),
            //[localStorage.getItem('SO2label'), ].concat(JSON.parse(localStorage.getItem('SO2'))),
            //[localStorage.getItem('H2Slabel'), ].concat(JSON.parse(localStorage.getItem('H2S'))),
            //[localStorage.getItem('TORlabel'), ].concat(JSON.parse(localStorage.getItem('TOR'))),
            //[localStorage.getItem('TOXlabel'), ].concat(JSON.parse(localStorage.getItem('TOX'))),
            //[localStorage.getItem('TOX2label'), ].concat(JSON.parse(localStorage.getItem('TOX2'))),
	    	//['Time', ].concat(JSON.parse(localStorage.getItem('time'))),
        ],
    });

}, 5000);


var GASchart = c3.generate({
	data: {
	x: 'Time',
         columns: [
            [localStorage.getItem('COlabel'), ].concat(COArray),
            [localStorage.getItem('NO2label'), ].concat(NO2Array),
            [localStorage.getItem('O3label'), ].concat(O3Array),
            [localStorage.getItem('SO2label'), ].concat(SO2Array),
            [localStorage.getItem('H2Slabel'), ].concat(H2SArray),
            [localStorage.getItem('TORlabel'), ].concat(TORArray),
            [localStorage.getItem('TOXlabel'), ].concat(TOXArray),
            [localStorage.getItem('TOX2label'), ].concat(TOX2Array),
	    	['Time', ].concat(timeArray),
            //[localStorage.getItem('COlabel'), ].concat(JSON.parse(localStorage.getItem('CO'))),
            //[localStorage.getItem('NO2label'), ].concat(JSON.parse(localStorage.getItem('NO2'))),
            //[localStorage.getItem('O3label'), ].concat(JSON.parse(localStorage.getItem('O3'))),
            //[localStorage.getItem('SO2label'), ].concat(JSON.parse(localStorage.getItem('SO2'))),
            //[localStorage.getItem('H2Slabel'), ].concat(JSON.parse(localStorage.getItem('H2S'))),
            //[localStorage.getItem('TORlabel'), ].concat(JSON.parse(localStorage.getItem('TOR'))),
            //[localStorage.getItem('TOXlabel'), ].concat(JSON.parse(localStorage.getItem('TOX'))),
            //[localStorage.getItem('TOX2label'), ].concat(JSON.parse(localStorage.getItem('TOX2'))),
	    	//['Time', ].concat(JSON.parse(localStorage.getItem('time'))),
        ],
type: 'area-spline',
    },
point: {
  show: false
}, 
zoom: {
	enabled: true
},
	bindto: '#GAS'
});


setInterval(function () {
	ENVchart.load({
        columns: [
            ['Humidity (%)', ].concat(rhArray),
            ['Pressure (hPa)', ].concat(pressureArray),
            ['Temperature (C)', ].concat(tempArray),
	    	['Time', ].concat(timeArray),
            //['Humidity (%)', ].concat(JSON.parse(localStorage.getItem('RH'))),
            //['Pressure (hPa)', ].concat(JSON.parse(localStorage.getItem('PRESSURE'))),
            //['Temperature (C)', ].concat(JSON.parse(localStorage.getItem('TEMP'))),
	    	//['Time', ].concat(JSON.parse(localStorage.getItem('time'))),
        ]
    });

}, 5000);

var ENVchart = c3.generate({
    data: {
	x: 'Time',
         columns: [
            ['Humidity (%)', ].concat(rhArray),
            ['Pressure (hPa)', ].concat(pressureArray),
            ['Temperature (C)', ].concat(tempArray),
	    	['Time', ].concat(timeArray),
            //['Humidity (%)', ].concat(JSON.parse(localStorage.getItem('RH'))),
            //['Pressure (hPa)', ].concat(JSON.parse(localStorage.getItem('PRESSURE'))),
            //['Temperature (C)', ].concat(JSON.parse(localStorage.getItem('TEMP'))),
	    	//['Time', ].concat(JSON.parse(localStorage.getItem('time'))),
        ],
type: 'area-spline',
    },
point: {
  show: false
}, 
zoom: {
	enabled: true
},
	bindto: '#ENV'
});
setInterval(function () {
fetchData();
}, 5000);
//setInterval(function () {
//fetchCalibration();
//}, 10000);
</script>
<div class="section"><h3>New Calibration Parameters</h3> 	
<div>
<table class="content"> 
<tbody>

<form action="addnew" method="post" id="calibration">

  
<tr>
    <th>Address</th>   <th>Type</th> <th>Sensitivity</th>    <th>Baseline</th>    <th>Zero</th>    <th>Span </th></tr>
  <p>  
<tr>
  <td> Module: <b>87</b> / Sensor: <b>1</b>  &nbsp;</td>
  <td><select id="AAsel" name="AAsel" form="calibration">
     <option value="CO-2">CO-2</option>
     <option value="NO22">NO2-2</option>
     <option value="O3-2">O3-2</option>
     <option value="SO22">SO2-2</option>
     <option value="H2S2">H2S-2</option>
     <option value="TOX2">TOX-2</option> 
     <option value="TOR2">TOR-2</option>
     <option value="CO-">CO</option>
     <option value="NO2">NO2</option>
     <option value="O3-">O3</option>
     <option value="SO2">SO2</option>
     <option value="H2S">H2S</option>
     <option value="TOX">TOX</option>
     <option value="TOR">TOR</option>
     </select>
   </td>	
   <td> <input type="text" name="AA_sen" id="AA_sen"></input><br></td>
   <td><input type="text" name="AA_base" id="AA_base"></input><br> </td>  
   <td><input type="text" name="AA_zero" id="AA_zero"></input><br></td>
   <td><input type="text" name="AA_span" id="AA_span"></input><br></td>

   </tr>
<tr>
  <td> Module: <b>87</b> / Sensor: <b>2</b>  &nbsp;</td>
  <td><select id="ABsel" name="ABsel" form="calibration">
     <option value="CO-">CO</option>
     <option value="NO2">NO2</option>
     <option value="O3-">O3</option>
     <option value="SO2">SO2</option>
     <option value="H2S">H2S</option>
     <option value="TOX">TOX</option> 
     <option value="TOR">TOR</option>
     </select>
   </td>	
   <td> <input type="text" name="AB_sen" id="AB_sen"></input><br></td>
   <td><input type="text" name="AB_base" id="AB_base"></input><br> </td>  
   <td><input type="text" name="AB_zero" id="AB_zero"></input><br></td>
   <td><input type="text" name="AB_span" id="AB_span"></input><br></td>
   </tr>
   <tr>
  <td>Module: <b>86</b> / Sensor: <b>1</b> &nbsp;</td>
   <td><select id="BAsel" name="BAsel" form="calibration">
     <option value="CO-">CO</option>
     <option value="NO2">NO2</option>
     <option value="O3-">O3</option>
     <option value="SO2">SO2</option>
     <option value="H2S">H2S</option>
     <option value="TOX">TOX</option>
     <option value="TOR">TOR</option>
     </select>
   </td>	
   <td> <input type="text" name="BA_sen" id="BA_sen"></input><br></td>
   <td><input type="text" name="BA_base" id="BA_base"></input><br> </td>  
   <td><input type="text" name="BA_zero" id="BA_zero"></input><br></td>
   <td><input type="text" name="BA_span" id="BA_span"></input><br></td>
   </tr>
   <tr>
   <td> Module: <b>86</b> / Sensor: <b>2</b>  </td>
   <td><select id="BBsel" name="BBsel" form="calibration">
     <option value="CO-">CO</option>
     <option value="NO2">NO2</option>
     <option value="O3-">O3</option>
     <option value="SO2">SO2</option>
     <option value="H2S">H2S</option>
     <option value="TOX">TOX</option>
     <option value="TOR">TOR</option>
     </select>
   </td>	
   <td><input type="text" name="BB_sen" id="BB_sen"></input><br></td>
   <td><input type="text" name="BB_base" id="BB_base"></input><br>  </td> 
   <td><input type="text" name="BB_zero" id="BB_zero"></input><br></td>
   <td><input type="text" name="BB_span" id="BB_span"></input><br></td>
   </tr>
  <tr>
  <td>Module: <b>85</b> / Sensor: <b>1</b>  &nbsp;</td>
   <td><select id="CAsel" name="CAsel" form="calibration">
     <option value="CO-">CO</option>
     <option value="NO2">NO2</option>
     <option value="O3-">O3</option>
     <option value="SO2">SO2</option>
     <option value="H2S">H2S</option>
     <option value="TOX">TOX</option>
     <option value="TOR">TOR</option>
     </select>
   </td>		
   <td> <input type="text" name="CA_sen" id="CA_sen" ></input><br></td>
   <td><input type="text" name="CA_base" id="CA_base" ></input><br> </td>  
   <td><input type="text" name="CA_zero" id="CA_zero" ></input><br></td>
   <td><input type="text" name="CA_span" id="CA_span" ></input><br></td>
   </tr>
   <tr>
   <td> Module: <b>85</b> / Sensor: <b>2</b> <br> </td>
   <td><select id="CBsel"  name="CBsel" form="calibration">
     <option value="CO-">CO</option>
     <option value="NO2">NO2</option>
     <option value="O3-">O3</option>
     <option value="SO2">SO2</option>
     <option value="H2S">H2S</option>
     <option value="TOX">TOX</option>
     <option value="TOR">TOR</option>
     </select>
   </td>	
   <td><input type="text" name="CB_sen" id="CB_sen" ></input><br></td>
   <td><input type="text" name="CB_base" id="CB_base" ></input><br>  </td> 
   <td><input type="text" name="CB_zero" id="CB_zero" ></input><br></td>
   <td><input type="text" name="CB_span" id="CB_span" ></input><br></td>
   </tr>   
   <tr>
   <td> Module: <b>83</b> / Sensor: <b>1</b>  <br></td>
   <td><select id="DAsel" name="DAsel" form="calibration">
     <option value="CO-">CO</option>
     <option value="NO2">NO2</option>
     <option value="O3-">O3</option>
     <option value="SO2">SO2</option>
     <option value="H2S">H2S</option>
     <option value="TOX">TOX</option>
     <option value="TOR">TOR</option>
     </select>
   </td>	
    <td><input type="text" name="DA_sen" id="DA_sen" ></input><br></td>
    <td><input type="text" name="DA_base" id="DA_base" ></input><br> </td>  
    <td><input type="text" name="DA_zero" id="DA_zero" ></input><br></td>
    <td><input type="text" name="DA_span" id="DA_span" ></input><br></td>
   </tr>
   <tr>
   <td> Module: <b>83</b> / Sensor: <b>2</b> <br> </td>
   <td><select id="DBsel" name="DBsel" form="calibration">
     <option value="CO-">CO</option>
     <option value="NO2">NO2</option>
     <option value="O3-">O3</option>
     <option value="SO2">SO2</option>
     <option value="H2S">H2S</option>
     <option value="TOX">TOX</option>
     <option value="TOR">TOR</option>
     </select>
   </td>	
   <td><input type="text" name="DB_sen" id="DB_sen" ></input><br></td>
   <td><input type="text" name="DB_base" id="DB_base" ></input><br>  </td> 
   <td><input type="text" name="DB_zero" id="DB_zero" ></input><br></td>
   <td><input type="text" name="DB_span" id="DB_span" ></input><br></td>
   </tr>   

   <tr>
   <button type="submit">Submit</button>
</p>   

  </div> 
   </tr> 
 </form> 

          </tbody>
        </table> 
<script>
function fetchCalibration() {
	
    fetchPosts();
	//localStorage.clear();
	var elem = document.getElementById("AA_sen");
	elem.value = localStorage.getItem('AA_sen');
	var elem = document.getElementById("AA_base");
	elem.value = localStorage.getItem('AA_base');
	var elem = document.getElementById("AA_zero");
	elem.value = localStorage.getItem('AA_zero');
	var elem = document.getElementById("AA_span");
	elem.value = localStorage.getItem('AA_span');
	var elem = document.getElementById("AB_sen");
	elem.value = localStorage.getItem('AB_sen');
	var elem = document.getElementById("AB_base");
	elem.value = localStorage.getItem('AB_base');
	var elem = document.getElementById("AB_zero");
	elem.value = localStorage.getItem('AB_zero');
	var elem = document.getElementById("AB_span");
	elem.value = localStorage.getItem('AB_span');

	var elem = document.getElementById("BB_sen");
	elem.value = localStorage.getItem('BB_sen');
	var elem = document.getElementById("BB_base");
	elem.value = localStorage.getItem('BB_base');
	var elem = document.getElementById("BB_zero");
	elem.value = localStorage.getItem('BB_zero');
	var elem = document.getElementById("BB_span");
	elem.value = localStorage.getItem('BB_span');
	var elem = document.getElementById("BA_sen");
	elem.value = localStorage.getItem('BA_sen');
	var elem = document.getElementById("BA_base");
	elem.value = localStorage.getItem('BA_base');
	var elem = document.getElementById("BA_zero");
	elem.value = localStorage.getItem('BA_zero');
	var elem = document.getElementById("BA_span");
	elem.value = localStorage.getItem('BA_span');
	var elem = document.getElementById("CB_sen");
	elem.value = localStorage.getItem('CB_sen');
	var elem = document.getElementById("CB_base");
	elem.value = localStorage.getItem('CB_base');
	var elem = document.getElementById("CB_zero");
	elem.value = localStorage.getItem('CB_zero');
	var elem = document.getElementById("CB_span");
	elem.value = localStorage.getItem('CB_span');
	var elem = document.getElementById("CA_sen");
	elem.value = localStorage.getItem('CA_sen');
	var elem = document.getElementById("CA_base");
	elem.value = localStorage.getItem('CA_base');
	var elem = document.getElementById("CA_zero");
	elem.value = localStorage.getItem('CA_zero');
	var elem = document.getElementById("CA_span");
	elem.value = localStorage.getItem('CA_span');
	var elem = document.getElementById("DB_sen");
	elem.value = localStorage.getItem('DB_sen');
	var elem = document.getElementById("DB_base");
	elem.value = localStorage.getItem('DB_base');
	var elem = document.getElementById("DB_zero");
	elem.value = localStorage.getItem('DB_zero');
	var elem = document.getElementById("DB_span");
	elem.value = localStorage.getItem('DB_span');
	var elem = document.getElementById("DA_sen");
	elem.value = localStorage.getItem('DA_sen');
	var elem = document.getElementById("DA_base");
	elem.value = localStorage.getItem('DA_base');
	var elem = document.getElementById("DA_zero");
	elem.value = localStorage.getItem('DA_zero');
	var elem = document.getElementById("DA_span");
	elem.value = localStorage.getItem('DA_span');

	var elem = document.getElementById("AAsel");
	elem.value = localStorage.getItem('AAsel');
	var elem = document.getElementById("ABsel");
	elem.value = localStorage.getItem('ABsel');
	var elem = document.getElementById("BAsel");
	elem.value = localStorage.getItem('BAsel');
	var elem = document.getElementById("BBsel");
	elem.value = localStorage.getItem('BBsel');
	var elem = document.getElementById("CAsel");
	elem.value = localStorage.getItem('CAsel');
	var elem = document.getElementById("CBsel");
	elem.value = localStorage.getItem('CBsel');
	var elem = document.getElementById("DAsel");
	elem.value = localStorage.getItem('DAsel');
	var elem = document.getElementById("DBsel");
	elem.value = localStorage.getItem('DBsel');
	}
fetchCalibration();
</script>
</div> 
</body></html>